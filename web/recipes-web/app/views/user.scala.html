@(user: uk.co.recipes.api.IUser, recommendedRecipes: List[uk.co.recipes.api.IRecipe], recommendedItems: List[uk.co.recipes.api.ICanonicalItem])

@import com.feth.play.module.pa.views.html._

@main("User page") {
}

<!DOCTYPE html>

<html>
    <head>
        <link rel="shortcut icon" type="image/png" href="/assets/images/favicon.png">
		<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
		<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
		<style>body { padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */ } span.label a { color: white; font-weight: normal; }</style>
    </head>

    <body>

    <div class="navbar navbar-fixed-top navbar-inverse">
	<div class="navbar-inner">
		<div class="container">
			<a class="btn btn-navbar">
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</a>
			<a class="brand" href="index.jsp">Recipes 2013</a>
			<ul class="nav">
				<li class="active"><a href="index.jsp">Home</a></li>
				<li><a href="/users/andrew_regan">User #1</a></li>
				<li><a href="/recipes/noodles.txt">Recipes: One</a></li>
				<li><a href="/recipes.html">Test 1</a></li>
				<li><a href="/items/cognac">Items: One</a></li>
				<li><a href="/stats.html">Stats</a></li>
			</ul>
			<form action="/search" class="navbar-search pull-right">
			  <input type="text" name="input" class="search-query" placeholder="Search..." />
			</form>
		</div>
	</div>
	</div>

<section id="top">
    <div class="wrapper">
        <h1>@user</h1>
    </div>
</section>

<p>Providers:
@forProviders() { p =>
    <a href="@p.getUrl()">@p.getKey()</a>
}

@currentAuth() { auth =>
    @if(auth != null) {
    Logged in with provider '@auth.getProvider()' and the user ID '@auth.getId()'<br/>
    Your session expires
    @if(auth.expires() == -1){
        never
    } else {
        at @auth.expires() (UNIX timestamp)
    }
        <a href="@com.feth.play.module.pa.controllers.Authenticate.logout">Logout</a>
    }
}</p>

<p>Recommended Items</p>
<ol>
@for( eachItem <- recommendedItems) {
  <li><a href="http://localhost:9000/items/@eachItem.getCanonicalName()">@eachItem.getCanonicalName()</a>&nbsp;@for(tagName <- eachItem.getTagNamesForDisplay()){&nbsp;<span class="label label-info"><a href="/tags/@tagName">@tagName</a></span>}</li>  <!-- Parent stuff -->
}
</ol>

<hr />

<p>Item Ratings: <span class="badge label-default">@user.getItemRatings().size()</span>&nbsp;: @user.getItemRatings()</p>
<p>Recipe Ratings: <span class="badge label-default">@user.getRecipeRatings().size()</span>&nbsp;: @user.getRecipeRatings()</p>

<hr />

<p>Recommended Recipes</p>

<div class="container-fluid">

@for(( eachRecipe, index) <- recommendedRecipes.zipWithIndex) {

@if((index % 3) == 0) {
	@if( index >= 3) {
	  </div>  <!-- <div class="row-fluid"> -->
	}
 <div class="row-fluid">
}

<div class="span4">
  <div class="hero-unit"><a href="/recipes/@eachRecipe.getTitle()">@eachRecipe.getTitle()</a> <a href="/recipes/@eachRecipe.getTitle()/fork">[F]   <a id="toggle_@index" class="btn" href="#"><i class="icon-chevron-down"></i></a></div>
  	<div style="display: none" id="ingredients_@index"><ol>
@for(item <- eachRecipe.getItems()) {
<li><a href="http://localhost:9000/items/@item.getCanonicalName()">@item.getCanonicalName()</a>&nbsp;@for(tagName <- item.getTagNamesForDisplay()){&nbsp;<span class="label label-info"><a href="/tags/@tagName">@tagName</a></span>}</li>
}
  	</ol></div>
</div>  <!-- <div class="span4"> -->

<script>
$('#toggle_@index').click(function() {
  $('#ingredients_@index').slideToggle(function() {
    // Should toggle chevron
  });
});
</script>

}

</div>  <!-- <div class="container-fluid"> -->

</body>
</html>