@(recipe: uk.co.recipes.api.IRecipe, categorisation: com.google.common.collect.Multiset[uk.co.recipes.api.ITag], similarities: List[uk.co.recipes.api.IRecipe])

@main("Recipe: " + recipe.getTitle() ) {
	<section id="top">
	    <div class="wrapper">
	        <h1><span class="label label-success">@recipe.getId()</span>&nbsp;@recipe.getTitle() <span class="label label-error">@recipe.getLocale()</span> <a href="/recipes/@recipe.getTitle()/fork">[F]</a></h1>
	    </div>
	</section>
	
	@if( recipe.getForkDetails() != null) {
	<p>@recipe.getForkDetails()</p>
	}
	
	<div class="btn-group">
	  <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
	    Your Rating
	    <span class="caret"></span>
	  </a>
	  <ul class="dropdown-menu">
	    <li><a href="/recipes/@recipe.getTitle()/rate/1">1/10</a></li>
	    <li><a href="/recipes/@recipe.getTitle()/rate/2">2/10</a></li>
	    <li><a href="/recipes/@recipe.getTitle()/rate/3">3/10</a></li>
	    <li><a href="/recipes/@recipe.getTitle()/rate/4">4/10</a></li>
	    <li><a href="/recipes/@recipe.getTitle()/rate/5">5/10</a></li>
	    <li><a href="/recipes/@recipe.getTitle()/rate/6">6/10</a></li>
	    <li><a href="/recipes/@recipe.getTitle()/rate/7">7/10</a></li>
	    <li><a href="/recipes/@recipe.getTitle()/rate/8">8/10</a></li>
	    <li><a href="/recipes/@recipe.getTitle()/rate/9">9/10</a></li>
	    <li><a href="/recipes/@recipe.getTitle()/rate/10">10/10</a></li>
	  </ul>
	</div>
	
	<ol>
	@for(item <- recipe.getItems()) {
	<li><a href="http://localhost:9000/items/@item.getCanonicalName()">@item.getCanonicalName()</a>&nbsp;@for(tagName <- item.getTagNamesForDisplay()){&nbsp;<span class="label label-info"><a href="/tags/@tagName">@tagName</a></span>}&nbsp;<a href="/recipes/@recipe.getTitle()/@item.getCanonicalName()/remove">[x]</a></li>
	}
	</ol>
	
	<hr />
	<p><span class="label label-default">Created:</span> @recipe.getCreationTime() </p>
	<p><span class="label label-default">Categorisation:</span> @categorisation</p>

	<div class="btn-group">
	  <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
	    Filter
	    <span class="caret"></span>
	  </a>
	  <ul class="dropdown-menu">
		@for( eachTag <- controllers.Application.allTags().iterator) {
	    <li><a href="/user/filter?set=@eachTag">@eachTag</a></li>
	    }
	  </ul>
	</div>

	<p>Similar Recipes:</p>
	
	<div class="container-fluid">
	
	@for(( eachRecipe, index) <- similarities.zipWithIndex) {
	
	@if((index % 3) == 0) {
		@if( index >= 3) {
		  </div>  <!-- <div class="row-fluid"> -->
		}
	 <div class="row-fluid">
	}
	
	<div class="span4">
	  <div class="hero-unit"><a href="/recipes/@eachRecipe.getTitle()">@eachRecipe.getTitle()</a> <a href="/recipes/@eachRecipe.getTitle()/fork">[F]   <a id="toggle_@index" class="btn" href="#"><i class="icon-chevron-down"></i></a></div>
	  	<div style="display: none" id="ingredients_@index"><ol>
	@for(item <- eachRecipe.getItems()) {
	<li><a href="http://localhost:9000/items/@item.getCanonicalName()">@item.getCanonicalName()</a>&nbsp;@for(tagName <- item.getTagNamesForDisplay()){&nbsp;<span class="label label-info"><a href="/tags/@tagName">@tagName</a></span>}</li>
	}
	  	</ol></div>
	</div>  <!-- <div class="span4"> -->
	
	<script>
	$('#toggle_@index').click(function() {
	  $('#ingredients_@index').slideToggle(function() {
	    // Should toggle chevron
	  });
	});
	</script>
	
	}
	
	</div>  <!-- <div class="container-fluid"> -->
}